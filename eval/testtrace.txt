DROP TABLE IF EXISTS blah, users, msgs, privmsg;
CREATE TABLE msgs (msgid equals privmsg.msgid integer, msgtext encfor msgid text);
CREATE TABLE privmsg (msgid integer, recid equals users.userid hasaccessto msgid integer, senderid hasaccessto msgid integer);
CREATE TABLE users (userid equals privmsg.senderid integer, username givespsswd userid text);
INSERT INTO activeusers VALUES ('alice', 'secretalice');  
INSERT INTO activeusers VALUES ('bob', 'secretbob');
INSERT INTO users VALUES (1, 'alice');                                  
INSERT INTO users VALUES (2, 'bob');
INSERT INTO privmsg (recid, senderid) VALUES (1, 2);
INSERT INTO msgs (msgtext) VALUES ('hello world');
SELECT msgtext from msgs WHERE msgid = 1;
SELECT msgtext from msgs, privmsg, users WHERE username = 'alice' AND userid = recid AND msgs.msgid = privmsg.msgid;
CREATE TABLE blah (id integer, words text);
INSERT INTO privmsg VALUES(2,2,1);
INSERT INTO msgs VALUES(2,'hello to you too');
SELECT * FROM privmsg;
UPDATE privmsg SET recid=1 WHERE msgid=2;
INSERT INTO blah VALUES(3,'SELECT FROM privmsg');
UPDATE blah SET id=5 WHERE id=3;
SELECT * FROM msgs;
SELECT * FROM privmsg;
SELECT recid FROM privmsg;
SELECT * FROM blah;
DELETE FROM blah WHERE id=5;
DELETE FROM privmsg WHERE recid=1;
SELECT * FROM msgs;
SELECT * FROM privmsg;
SELECT recid FROM privmsg;
SELECT * FROM blah;
